import os

from django import forms


class FileFieldForm(forms.ModelForm):
    def __init__(self, *args, **kwargs):
        super(FileFieldForm, self).__init__(*args, **kwargs)
        original_path = self.initial.get('file')
        if original_path:
            original_path = original_path.name
            base_path = os.path.dirname(original_path)
            rel_strip = 'attachments/'
            initial_path = os.path.relpath(base_path, rel_strip)
            self.fields['path_override'].initial = initial_path


    file = forms.FileField(widget=forms.ClearableFileInput(attrs={'multiple': True}))
    path_override = forms.CharField(max_length=64, required=False, help_text='Docelowy folder')
